import{pino as e}from"pino";import t,{useMultiFileAuthState as o,DisconnectReason as s}from"@whiskeysockets/baileys";e({level:"trace",transport:{targets:[{target:"pino-pretty",options:{colorize:!0},level:"trace"},{target:"pino/file",options:{destination:"./wa-logs.txt"},level:"trace"}]}}).level="trace";const n="27612266700";!async function i(){const{state:a,saveCreds:c}=await o("auth"),r=t({auth:a,printQRInTerminal:!1,logger:e({level:"info"}),browser:["Ubuntu","Chrome","20.0.04"]});r.ev.on("creds.update",c),r.ev.on("messages.upsert",async e=>{if("notify"===e.type)for(const t of e.messages){const e=(t.message?.conversation||t.message?.extendedTextMessage?.text)?.toLowerCase(),o=t.key.remoteJid,s=e?.includes("instagram.com"),n=e?.includes("youtube.com/shorts/");(s||n)&&(console.log("FILTERING BANNED CONTENT"),await r.chatModify({deleteForMe:{key:t.key,deleteMedia:!0,timestamp:Number(t.messageTimestamp)}},o),await r.sendMessage(o,{text:"The recipient was unable to receive this message. \n\nhttps://www.sciencedirect.com/science/article/pii/S2405844024063771\nhttps://pmc.ncbi.nlm.nih.gov/articles/PMC11066677/\nhttps://www.youtube.com/watch?v=d43tivfx0qw"}))}}),r.ev.on("connection.update",async e=>{const{connection:t,lastDisconnect:o}=e;if("close"===t){console.log("CONNECTION IS CLOSED, ATTEMPTING TO RECONNECT...");o?.error?.output?.statusCode!==s.loggedOut&&i()}else"open"===t&&console.log("âœ… Connection fully open!")}),r.authState.creds.registered||(console.log(`Waiting for registration system to initialize for ${n}...`),setTimeout(async()=>{try{const e=await r.requestPairingCode(n);console.log("\n--------------------------"),console.log(`YOUR PAIRING CODE: ${e}`),console.log("--------------------------\n")}catch(e){console.error("Critical error requesting pairing code:",e)}},5e3))}();
